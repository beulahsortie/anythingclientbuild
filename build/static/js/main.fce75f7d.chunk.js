(this["webpackJsonpreact-social"]=this["webpackJsonpreact-social"]||[]).push([[0],{120:function(e,t,c){},121:function(e,t,c){},122:function(e,t,c){},123:function(e,t,c){},124:function(e,t,c){},125:function(e,t,c){},126:function(e,t,c){},127:function(e,t,c){},128:function(e,t,c){},129:function(e,t,c){},130:function(e,t,c){},131:function(e,t,c){},132:function(e,t,c){},133:function(e,t,c){},134:function(e,t,c){},168:function(e,t,c){"use strict";c.r(t);var n=c(0),s=c.n(n),a=c(27),r=c.n(a),o=c(2),i=(c(92),c(182)),l=c(183),u=c(184),j=c(185),d=c(186),b=c(19),p=c(12),O=c(28),h=function(e,t){switch(t.type){case"LOGIN_START":return{user:null,token:null,isFetching:!0,error:!1};case"LOGIN_SUCCESS":return{user:t.payload.user,token:t.payload.token,isFetching:!1,error:!1};case"LOGIN_FAILURE":return{user:null,token:null,isFetching:!1,error:!0};case"FOLLOW":return Object(O.a)(Object(O.a)({},e),{},{user:Object(O.a)(Object(O.a)({},e.user),{},{followings:[].concat(Object(p.a)(e.user.followings),[t.payload])})});case"UNFOLLOW":return Object(O.a)(Object(O.a)({},e),{},{user:Object(O.a)(Object(O.a)({},e.user),{},{followings:e.user.followings.filter((function(e){return e!==t.payload}))})});default:return e}},f=c(1),m={user:JSON.parse(localStorage.getItem("user"))||null,token:localStorage.getItem("token")||null,isFetching:!1,error:!1},x=Object(n.createContext)(m),v=Object(n.createContext)(),g=function(e){var t=e.children,c=Object(n.useReducer)(h,m),s=Object(o.a)(c,2),a=s[0],r=s[1],i=Object(n.useState)(null),l=Object(o.a)(i,2),u=l[0],j=l[1];return Object(n.useEffect)((function(){localStorage.setItem("user",JSON.stringify(a.user)),localStorage.setItem("token",a.token||"")}),[a.user,a.token]),Object(f.jsx)(x.Provider,{value:{user:a.user,token:a.token,isFetching:a.isFetching,error:a.error,dispatch:r},children:Object(f.jsx)(v.Provider,{value:{passobject:u,setPassobject:j},children:t})})},N=c(86),k=c(84),w=(c(96),c(4)),I=c.n(w),S=c(9),y=c(39),C=c(8),L=c.n(C),_={BASE_URL:"https://akashworkspace.in/api",SOCKET_URL:"akashworkspace.in"},A={width:"100%",height:"500px"},R=function(){var e=Object(n.useState)(null),t=Object(o.a)(e,2),c=t[0],s=t[1],a=Object(n.useState)(null),r=Object(o.a)(a,2),i=r[0],l=r[1],u=Object(n.useState)([]),j=Object(o.a)(u,2),d=j[0],b=j[1],p=_.BASE_URL;Object(n.useEffect)((function(){navigator.geolocation.getCurrentPosition((function(e){var t={lat:e.coords.latitude,lng:e.coords.longitude};s(t),l(t),O(t.lat,t.lng)}))}),[]);var O=function(){var e=Object(S.a)(I.a.mark((function e(t,c){var n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L.a.get("".concat(p,"/maps/nearby-users?lat=").concat(t,"&lng=").concat(c));case 3:n=e.sent,console.log("nearby-users",n.data),b(n.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,c){return e.apply(this,arguments)}}();return Object(f.jsx)(y.b,{googleMapsApiKey:"AIzaSyCSD9727tfkAQbU90cw0PQS6dz8D2f3_aU",children:Object(f.jsxs)(y.a,{mapContainerStyle:A,center:i||c||{lat:0,lng:0},zoom:14,onClick:function(e){var t={lat:e.latLng.lat(),lng:e.latLng.lng()};l(t),O(t.lat,t.lng)},children:[i&&Object(f.jsx)(y.c,{position:i,label:"Selected"}),d.map((function(e,t){return Object(f.jsx)(y.c,{position:{lat:e.location.coordinates[1],lng:e.location.coordinates[0]},label:e.name},t)}))]})})};var E=function(e){var t=e.onClose;return Object(f.jsx)("div",{className:"modal-overlay",children:Object(f.jsxs)("div",{className:"modal-content",children:[Object(f.jsx)("button",{className:"close-button",onClick:t,children:"X"}),Object(f.jsx)("h2",{children:"Choose desired location"}),Object(f.jsx)(R,{})]})})};function B(){var e=Object(n.useContext)(x).user,t="http://akashworkspace.in/images/",c=Object(n.useState)(!1),s=Object(o.a)(c,2),a=s[0],r=s[1];return Object(f.jsxs)("div",{className:"topbarContainer",children:[Object(f.jsx)("div",{className:"topbarLeft",children:Object(f.jsx)(b.b,{to:"/",style:{textDecoration:"none"},children:Object(f.jsx)("span",{className:"logo",children:"GiveAway"})})}),Object(f.jsx)("div",{className:"topbarCenter",children:Object(f.jsxs)("div",{className:"searchbar",children:[Object(f.jsx)(i.a,{className:"searchIcon"}),Object(f.jsx)("input",{placeholder:"Search for Products",className:"searchInput"})]})}),Object(f.jsxs)("div",{children:[Object(f.jsx)("span",{onClick:function(){return r(!0)},children:Object(f.jsx)(l.a,{style:{color:" #fcfaf9 "}})}),a&&Object(f.jsx)(E,{onClose:function(){return r(!1)}})]}),Object(f.jsxs)("div",{className:"topbarRight",children:[Object(f.jsx)("div",{className:"topbarLinks",children:Object(f.jsx)("span",{className:"topbarLink"})}),Object(f.jsxs)("div",{className:"topbarIcons",children:[Object(f.jsx)("div",{className:"topbarIconItem",children:Object(f.jsx)(b.b,{to:"/",style:{textDecoration:"none"},children:Object(f.jsx)(u.a,{style:{color:" #fcfaf9 "}})})}),Object(f.jsx)(b.b,{to:"/messenger",children:Object(f.jsx)("div",{className:"topbarIconItem",children:Object(f.jsx)(j.a,{style:{color:" #fcfaf9 "}})})}),Object(f.jsxs)("div",{className:"topbarIconItem",children:[Object(f.jsx)(d.a,{}),Object(f.jsx)("span",{className:"topbarIconBadge",children:"1"})]})]}),Object(f.jsx)(b.b,{to:"/profile/".concat(e.username),children:Object(f.jsx)("img",{src:e.profilePicture?t+e.profilePicture:t+"person/noAvatar.png",alt:"",className:"topbarImg"})}),Object(f.jsx)("div",{className:"topbarIconItem",children:Object(f.jsx)("button",{onClick:function(){localStorage.removeItem("user"),localStorage.removeItem("token"),console.log("user",e._id),window.location.reload()},style:{backgroundColor:"#1877f2",border:"none",borderRadius:"5px",padding:"10px",cursor:"pointer"},children:Object(f.jsx)(N.a,{icon:k.a,style:{fontSize:"20px",color:"white",backgroundColor:"#1877f2",border:"none",padding:0,margin:0}})})})]})]})}c(120);var U=c(187);c(121);function P(){return Object(f.jsx)("div",{className:"sidebar",children:Object(f.jsxs)("div",{className:"sidebarWrapper",children:[Object(f.jsxs)("ul",{className:"sidebarList",children:[Object(f.jsxs)("li",{className:"sidebarListItem",children:[Object(f.jsx)(U.a,{className:"sidebarIcon"}),Object(f.jsx)("span",{className:"sidebarListItemText",children:"Feed"})]}),Object(f.jsxs)("li",{className:"sidebarListItem",children:[Object(f.jsx)(j.a,{className:"sidebarIcon"}),Object(f.jsx)("span",{className:"sidebarListItemText",children:"Chats"})]})]}),Object(f.jsx)("button",{className:"sidebarButton",children:"Show More"}),Object(f.jsx)("hr",{className:"sidebarHr"})]})})}c(122);var T=c(188),F=c(48),D=c(10);function W(e){var t=e.post,c=Object(n.useState)(t.likes.length),s=Object(o.a)(c,2),a=s[0],r=s[1],i=Object(n.useState)(!1),l=Object(o.a)(i,2),u=l[0],j=l[1],d=Object(n.useState)({}),p=Object(o.a)(d,2),O=p[0],h=p[1],m="http://akashworkspace.in/images/",g=Object(n.useContext)(x).user,N=Object(D.g)(),k=Object(n.useContext)(v).setPassobject,w=_.BASE_URL;Object(n.useEffect)((function(){j(t.likes.includes(g._id))}),[g._id,t.likes]),Object(n.useEffect)((function(){(function(){var e=Object(S.a)(I.a.mark((function e(){var c;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.a.get("".concat(w,"/users?userId=").concat(t.userId));case 2:c=e.sent,h(c.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t.userId]);var y=function(){var e=Object(S.a)(I.a.mark((function e(t){var c,n,s,a;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("postuser..",t),e.next=4,L.a.get("".concat(w,"/conversations/find/").concat(g._id,"/").concat(t));case 4:if(c=e.sent,console.log("con..",c.data),null!==c.data){e.next=16;break}return n=g._id,s=t,e.next=11,L.a.post("".concat(w,"/conversations"),{senderId:n,receiverId:s});case 11:a=e.sent,console.log("newconv",a),k(a.data),e.next=17;break;case 16:k(c.data);case 17:N.push("/messenger"),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(0),console.log(e.t0);case 23:case"end":return e.stop()}}),e,null,[[0,20]])})));return function(t){return e.apply(this,arguments)}}(),C=function(){try{L.a.put("".concat(w,"/posts/")+t._id+"/like",{userId:g._id})}catch(e){}r(u?a-1:a+1),j(!u)};return Object(f.jsx)("div",{className:"post",children:Object(f.jsxs)("div",{className:"postWrapper",children:[Object(f.jsxs)("div",{className:"postTop",children:[Object(f.jsxs)("div",{className:"postTopLeft",children:[Object(f.jsx)(b.b,{to:"/profile/".concat(O.username),children:Object(f.jsx)("img",{className:"postProfileImg",src:O.profilePicture?m+O.profilePicture:m+"person/noAvatar.png",alt:""})}),Object(f.jsx)("span",{className:"postUsername",children:O.username}),Object(f.jsx)("span",{className:"postDate",children:Object(F.a)(t.createdAt)})]}),Object(f.jsx)("div",{className:"postTopRight",children:Object(f.jsx)(T.a,{})})]}),Object(f.jsxs)("div",{className:"postCenter",children:[Object(f.jsx)("span",{className:"postText",children:null===t||void 0===t?void 0:t.desc}),Object(f.jsx)("img",{className:"postImg",src:t.img.startsWith("https://")?t.img:m+t.img,alt:""})]}),Object(f.jsxs)("div",{className:"postBottom",children:[Object(f.jsxs)("div",{className:"postBottomLeft",children:[Object(f.jsx)("img",{className:"likeIcon",src:"".concat(m,"like.png"),onClick:C,alt:""}),Object(f.jsx)("img",{className:"likeIcon",src:"".concat(m,"heart.png"),onClick:C,alt:""}),Object(f.jsxs)("span",{className:"postLikeCounter",children:[a," people like it"]})]}),Object(f.jsx)("div",{className:"postBottomRight",children:Object(f.jsxs)("span",{className:"postCommentText",onClick:function(){return y(t.userId)},children:[t.comment," Message"]})})]})]})})}c(123);var M=c(189),G=c(190),z=c(191),q=c(192),J=c(193);function K(){var e=Object(n.useContext)(x).user,t="http://akashworkspace.in/images/",c=Object(n.useRef)(),s=Object(n.useState)(null),a=Object(o.a)(s,2),r=a[0],i=a[1],l=_.BASE_URL,u=function(){var t=Object(S.a)(I.a.mark((function t(n){var s,a,o,i;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),s={userId:e._id,desc:c.current.value},console.log("file",r),!r){t.next=23;break}return a=new FormData,o=Date.now()+r.name,a.append("name",o),a.append("file",r),console.log("newpost",s),console.log("data",a),t.prev=10,t.next=13,L.a.post("".concat(l,"/upload"),a);case 13:return i=t.sent,console.log("res1",i.data),t.next=17,i.data.url;case 17:s.img=t.sent,t.next=23;break;case 20:t.prev=20,t.t0=t.catch(10),console.log("err...",t.t0);case 23:return t.prev=23,t.next=26,L.a.post("".concat(l,"/posts"),s);case 26:window.location.reload(),t.next=31;break;case 29:t.prev=29,t.t1=t.catch(23);case 31:case"end":return t.stop()}}),t,null,[[10,20],[23,29]])})));return function(e){return t.apply(this,arguments)}}();return Object(f.jsx)("div",{className:"share",children:Object(f.jsxs)("div",{className:"shareWrapper",children:[Object(f.jsxs)("div",{className:"shareTop",children:[Object(f.jsx)("img",{className:"shareProfileImg",src:e.profilePicture?t+e.profilePicture:t+"person/noAvatar.png",alt:""}),Object(f.jsx)("input",{placeholder:"What's in your mind "+e.username+"?",className:"shareInput",ref:c})]}),Object(f.jsx)("hr",{className:"shareHr"}),r&&Object(f.jsxs)("div",{className:"shareImgContainer",children:[Object(f.jsx)("img",{className:"shareImg",src:URL.createObjectURL(r),alt:""}),Object(f.jsx)(M.a,{className:"shareCancelImg",onClick:function(){return i(null)}})]}),Object(f.jsxs)("form",{className:"shareBottom",onSubmit:u,children:[Object(f.jsxs)("div",{className:"shareOptions",children:[Object(f.jsxs)("label",{htmlFor:"file",className:"shareOption",children:[Object(f.jsx)(G.a,{htmlColor:"tomato",className:"shareIcon"}),Object(f.jsx)("span",{className:"shareOptionText",children:"Photo or Video"}),Object(f.jsx)("input",{style:{display:"none"},type:"file",id:"file",accept:".png,.jpeg,.jpg",onChange:function(e){return i(e.target.files[0])}})]}),Object(f.jsxs)("div",{className:"shareOption",children:[Object(f.jsx)(z.a,{htmlColor:"blue",className:"shareIcon"}),Object(f.jsx)("span",{className:"shareOptionText",children:"Tag"})]}),Object(f.jsxs)("div",{className:"shareOption",children:[Object(f.jsx)(q.a,{htmlColor:"green",className:"shareIcon"}),Object(f.jsx)("span",{className:"shareOptionText",children:"Location"})]}),Object(f.jsxs)("div",{className:"shareOption",children:[Object(f.jsx)(J.a,{htmlColor:"goldenrod",className:"shareIcon"}),Object(f.jsx)("span",{className:"shareOptionText",children:"Feelings"})]})]}),Object(f.jsx)("button",{className:"shareButton",type:"submit",children:"Share"})]})]})})}c(124);function V(e){var t=e.username,c=Object(n.useState)([]),s=Object(o.a)(c,2),a=s[0],r=s[1],i=Object(n.useContext)(x).user,l=_.BASE_URL,u=Object(n.useState)([]),j=Object(o.a)(u,2),d=j[0],b=j[1];Object(n.useEffect)((function(){navigator.geolocation.getCurrentPosition((function(e){var t={lat:e.coords.latitude,lng:e.coords.longitude};O(t.lat,t.lng),p(t.lat,t.lng),console.log("BASE_URL",l)}))}),[]);var p=function(){var e=Object(S.a)(I.a.mark((function e(t,c){var n,s;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=i._id,e.next=4,L.a.post("".concat(l,"/maps/updatelocation"),{userid:n,latti:t,longi:c});case 4:s=e.sent,console.log("newconv",s),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,c){return e.apply(this,arguments)}}(),O=function(){var e=Object(S.a)(I.a.mark((function e(t,c){var n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L.a.get("".concat(l,"/maps/nearby-users?lat=").concat(t,"&lng=").concat(c));case 3:n=e.sent,console.log("nearby-users",n.data),b(n.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,c){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){(function(){var e=Object(S.a)(I.a.mark((function e(){var c;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("username",t),console.log("nearbyUserspost",d),!t){e.next=8;break}return e.next=5,L.a.get("".concat(l,"/posts/profile/")+t);case 5:e.t0=e.sent,e.next=11;break;case 8:return e.next=10,L.a.post("".concat(l,"/posts/timeline/")+i._id,d);case 10:e.t0=e.sent;case 11:c=e.t0,r(c.data.sort((function(e,t){return new Date(t.createdAt)-new Date(e.createdAt)})));case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t,i._id,d]),Object(f.jsx)("div",{className:"feed",children:Object(f.jsxs)("div",{className:"feedWrapper",children:[(!t||t===i.username)&&Object(f.jsx)(K,{}),a.map((function(e){return Object(f.jsx)(W,{post:e},e._id)}))]})})}c(125),c(126);c(194),c(195);function H(e){var t=e.user,c=Object(n.useState)([]),s=Object(o.a)(c,2),a=(s[0],s[1]),r=Object(n.useContext)(x),i=r.user,l=(r.dispatch,Object(n.useState)(i.followings.includes(null===t||void 0===t?void 0:t.id))),u=Object(o.a)(l,2),j=(u[0],u[1],_.BASE_URL);Object(n.useEffect)((function(){(function(){var e=Object(S.a)(I.a.mark((function e(){var c;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L.a.get("".concat(j,"/users/friends/")+t._id);case 3:c=e.sent,a(c.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[t]);return Object(f.jsx)("div",{className:"rightbar",children:Object(f.jsx)("div",{className:"rightbarWrapper"})})}c(127);function Q(){return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(B,{}),Object(f.jsxs)("div",{className:"homeContainer",children:[Object(f.jsx)(P,{}),Object(f.jsx)(V,{}),Object(f.jsx)(H,{})]})]})}c(128);var X=_.BASE_URL,Y=function(){var e=Object(S.a)(I.a.mark((function e(t,c){var n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c({type:"LOGIN_START"}),e.prev=1,e.next=4,L.a.post("".concat(X,"/auth/login"),t);case 4:n=e.sent,console.log("ressss",n.data),c({type:"LOGIN_SUCCESS",payload:n.data}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),c({type:"LOGIN_FAILURE",payload:e.t0});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,c){return e.apply(this,arguments)}}(),Z=c(196);function $(){var e=Object(n.useRef)(),t=Object(n.useRef)(),c=Object(n.useContext)(x),s=c.isFetching,a=c.dispatch,r=Object(D.g)(),i=function(){var c=Object(S.a)(I.a.mark((function c(n){return I.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return n.preventDefault(),c.prev=1,c.next=4,Y({email:e.current.value,password:t.current.value},a);case 4:c.next=9;break;case 6:c.prev=6,c.t0=c.catch(1),console.log(c.t0);case 9:case"end":return c.stop()}}),c,null,[[1,6]])})));return function(e){return c.apply(this,arguments)}}(),l=Object(n.useState)(""),u=Object(o.a)(l,2),j=(u[0],u[1],Object(n.useState)("")),d=Object(o.a)(j,2);d[0],d[1];return Object(f.jsx)("div",{className:"login",children:Object(f.jsxs)("div",{className:"loginWrapper",children:[Object(f.jsxs)("div",{className:"loginLeft",children:[Object(f.jsx)("h3",{className:"loginLogo",children:"GiveAway"}),Object(f.jsx)("span",{className:"loginDesc",children:"Connect and Share anything with friends and the world around you on GiveAway App."})]}),Object(f.jsxs)("div",{className:"loginRight",children:[Object(f.jsxs)("form",{className:"loginBox",onSubmit:i,children:[Object(f.jsx)("input",{placeholder:"Email",type:"email",required:!0,className:"loginInput",ref:e}),Object(f.jsx)("input",{placeholder:"Password",type:"password",required:!0,minLength:"6",className:"loginInput",ref:t}),Object(f.jsx)("button",{className:"loginButton",type:"submit",disabled:s,children:s?Object(f.jsx)(Z.a,{color:"white",size:"20px"}):"Log In"}),Object(f.jsx)("span",{className:"loginForgot",children:"Forgot Password?"})]}),Object(f.jsx)("button",{className:"loginRegisterButton",onClick:function(){r.push("/register")},children:s?Object(f.jsx)(Z.a,{color:"white",size:"20px"}):"Create a New Account"})]})]})})}c(129);function ee(e){var t=e.token,c="http://akashworkspace.in/images/",s=Object(n.useState)({}),a=Object(o.a)(s,2),r=a[0],i=a[1],l=Object(D.h)().username,u=_.BASE_URL;return Object(n.useEffect)((function(){(function(){var e=Object(S.a)(I.a.mark((function e(){var c;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.a.get("".concat(u,"/users?username=").concat(l),{headers:{Authorization:"Bearer ".concat(t)}});case 2:c=e.sent,i(c.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[l,t]),Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(B,{}),Object(f.jsxs)("div",{className:"profile",children:[Object(f.jsx)(P,{}),Object(f.jsxs)("div",{className:"profileRight",children:[Object(f.jsxs)("div",{className:"profileRightTop",children:[Object(f.jsxs)("div",{className:"profileCover",children:[Object(f.jsx)("img",{className:"profileCoverImg",src:r.coverPicture?c+r.coverPicture:c+"person/noCover.png",alt:""}),Object(f.jsx)("img",{className:"profileUserImg",src:r.profilePicture?c+r.profilePicture:c+"person/noAvatar.png",alt:""})]}),Object(f.jsxs)("div",{className:"profileInfo",children:[Object(f.jsx)("h4",{className:"profileInfoName",children:r.username}),Object(f.jsx)("span",{className:"profileInfoDesc",children:r.desc})]})]}),Object(f.jsxs)("div",{className:"profileRightBottom",children:[Object(f.jsx)(V,{username:l}),Object(f.jsx)(H,{user:r})]})]})]})]})}c(130);function te(){var e=Object(n.useRef)(),t=Object(n.useRef)(),c=Object(n.useRef)(),s=Object(n.useRef)(),a=Object(D.g)(),r=_.BASE_URL,o=function(){var n=Object(S.a)(I.a.mark((function n(o){var i;return I.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o.preventDefault(),s.current.value===c.current.value){n.next=5;break}s.current.setCustomValidity("Passwords don't match!"),n.next=16;break;case 5:return i={username:e.current.value,email:t.current.value,password:c.current.value},n.prev=6,console.log("inside"),n.next=10,L.a.post("".concat(r,"/auth/register"),i);case 10:a.push("/login"),n.next=16;break;case 13:n.prev=13,n.t0=n.catch(6),console.log(n.t0);case 16:case"end":return n.stop()}}),n,null,[[6,13]])})));return function(e){return n.apply(this,arguments)}}();return Object(f.jsx)("div",{className:"login",children:Object(f.jsxs)("div",{className:"loginWrapper",children:[Object(f.jsxs)("div",{className:"loginLeft",children:[Object(f.jsx)("h3",{className:"loginLogo",children:"GiveAway"}),Object(f.jsx)("span",{className:"loginDesc",children:"Connect and Share anything with friends and the world around you on GiveAway App."})]}),Object(f.jsxs)("div",{className:"loginRight",children:[Object(f.jsxs)("form",{className:"loginBox",onSubmit:o,children:[Object(f.jsx)("input",{placeholder:"Username",required:!0,ref:e,className:"loginInput"}),Object(f.jsx)("input",{placeholder:"Email",required:!0,ref:t,className:"loginInput",type:"email"}),Object(f.jsx)("input",{placeholder:"Password",required:!0,ref:c,className:"loginInput",type:"password",minLength:"6"}),Object(f.jsx)("input",{placeholder:"Password Again",required:!0,ref:s,className:"loginInput",type:"password"}),Object(f.jsx)("button",{className:"loginButton",type:"submit",children:"Sign Up"})]}),Object(f.jsx)("button",{className:"loginRegisterButton",onClick:function(){console.log("Button clicked!"),a.push("/login")},children:"Log into Account"})]})]})})}c(131),c(132);function ce(e){var t=e.conversation,c=e.currentUser,s=Object(n.useState)(null),a=Object(o.a)(s,2),r=a[0],i=a[1],l="http://akashworkspace.in/images/",u=_.BASE_URL;return Object(n.useEffect)((function(){var e=t.members.find((function(e){return e!==c._id}));(function(){var t=Object(S.a)(I.a.mark((function t(){var c;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,L()("".concat(u,"/users?userId=")+e);case 3:c=t.sent,i(c.data),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}})()()}),[c,t]),Object(f.jsxs)("div",{className:"conversation",children:[Object(f.jsx)("img",{className:"conversationImg",src:(null===r||void 0===r?void 0:r.profilePicture)?l+r.profilePicture:l+"person/noAvatar.png",alt:""}),Object(f.jsx)("span",{className:"conversationName",children:null===r||void 0===r?void 0:r.username})]})}c(133);function ne(e){var t=e.message,c=e.own;return Object(f.jsxs)("div",{className:c?"message own":"message",children:[Object(f.jsxs)("div",{className:"messageTop",children:[Object(f.jsx)("img",{className:"messageImg",src:"https://images.pexels.com/photos/3686769/pexels-photo-3686769.jpeg?auto=compress&cs=tinysrgb&dpr=2&w=500",alt:""}),Object(f.jsx)("p",{className:"messageText",children:t.text})]}),Object(f.jsx)("div",{className:"messageBottom",children:Object(F.a)(t.createdAt)})]})}c(134);function se(e){var t=e.onlineUsers,c=e.currentId,s=e.setCurrentChat,a=Object(n.useState)([]),r=Object(o.a)(a,2),i=r[0],l=r[1],u=Object(n.useState)([]),j=Object(o.a)(u,2),d=j[0],b=j[1],p="http://akashworkspace.in/images/",O=_.BASE_URL;Object(n.useEffect)((function(){(function(){var e=Object(S.a)(I.a.mark((function e(){var t;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.a.get("".concat(O,"/users/friends/")+c);case 2:t=e.sent,l(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[c]),Object(n.useEffect)((function(){b(i.filter((function(e){return t.includes(e._id)})))}),[i,t]);var h=function(){var e=Object(S.a)(I.a.mark((function e(t){var n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L.a.get("".concat(O,"/conversations/find/").concat(c,"/").concat(t._id));case 3:n=e.sent,s(n.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsx)("div",{className:"chatOnline",children:d.map((function(e){return Object(f.jsxs)("div",{className:"chatOnlineFriend",onClick:function(){return h(e)},children:[Object(f.jsxs)("div",{className:"chatOnlineImgContainer",children:[Object(f.jsx)("img",{className:"chatOnlineImg",src:(null===e||void 0===e?void 0:e.profilePicture)?p+e.profilePicture:p+"person/noAvatar.png",alt:""}),Object(f.jsx)("div",{className:"chatOnlineBadge"})]}),Object(f.jsx)("span",{className:"chatOnlineName",children:null===e||void 0===e?void 0:e.username})]})}))})}var ae=c(85);function re(){var e=Object(n.useState)([]),t=Object(o.a)(e,2),c=t[0],s=t[1],a=Object(n.useState)(null),r=Object(o.a)(a,2),i=r[0],l=r[1],u=Object(n.useState)([]),j=Object(o.a)(u,2),d=j[0],b=j[1],O=Object(n.useState)(""),h=Object(o.a)(O,2),m=h[0],g=h[1],N=Object(n.useState)(null),k=Object(o.a)(N,2),w=k[0],y=k[1],C=Object(n.useState)([]),A=Object(o.a)(C,2),R=A[0],E=A[1],U=Object(n.useRef)(),P=Object(n.useContext)(x).user,T=Object(n.useRef)(),F=Object(n.useContext)(v).passobject,D=_.BASE_URL,W=_.SOCKET_URL;Object(n.useEffect)((function(){U.current=Object(ae.io)("https://".concat(W)),U.current.on("getMessage",(function(e){y({sender:e.senderId,text:e.text,createdAt:Date.now()})}))}),[]),Object(n.useEffect)((function(){w&&(null===i||void 0===i?void 0:i.members.includes(w.sender))&&b((function(e){return[].concat(Object(p.a)(e),[w])}))}),[w,i]),Object(n.useEffect)((function(){U.current.emit("addUser",P._id),U.current.on("getUsers",(function(e){E(P.followings.filter((function(t){return e.some((function(e){return e.userId===t}))})))}))}),[P]),Object(n.useEffect)((function(){(function(){var e=Object(S.a)(I.a.mark((function e(){var t;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L.a.get("".concat(D,"/conversations/")+P._id);case 3:t=e.sent,console.log("convs",t.data),s(t.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}})()()}),[P._id]),Object(n.useEffect)((function(){(function(){var e=Object(S.a)(I.a.mark((function e(){var t;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L.a.get("".concat(D,"/messages/")+(null===i||void 0===i?void 0:i._id));case 3:t=e.sent,b(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[i]),Object(n.useEffect)((function(){(function(){var e=Object(S.a)(I.a.mark((function e(){var t;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("passobject",F),e.next=4,L.a.get("".concat(D,"/messages/")+F._id);case 4:t=e.sent,b(t.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}})()(),l(F)}),[F]);var M=function(){var e=Object(S.a)(I.a.mark((function e(t){var c,n,s;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),c={sender:P._id,text:m,conversationId:i._id},n=i.members.find((function(e){return e!==P._id})),U.current.emit("sendMessage",{senderId:P._id,receiverId:n,text:m}),e.prev=4,e.next=7,L.a.post("".concat(D,"/messages"),c);case 7:s=e.sent,b([].concat(Object(p.a)(d),[s.data])),g(""),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(4),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){var e;null===(e=T.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})}),[d]),Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(B,{}),Object(f.jsxs)("div",{className:"messenger",children:[Object(f.jsx)("div",{className:"chatMenu",children:Object(f.jsxs)("div",{className:"chatMenuWrapper",children:[Object(f.jsx)("input",{placeholder:"Search for friends",className:"chatMenuInput"}),c.map((function(e){return Object(f.jsx)("div",{onClick:function(){l(e),console.log("currchat",e)},children:Object(f.jsx)(ce,{conversation:e,currentUser:P})})}))]})}),Object(f.jsx)("div",{className:"chatBox",children:Object(f.jsx)("div",{className:"chatBoxWrapper",children:i?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("div",{className:"chatBoxTop",children:d.map((function(e){return Object(f.jsx)("div",{ref:T,children:Object(f.jsx)(ne,{message:e,own:e.sender===P._id})})}))}),Object(f.jsxs)("div",{className:"chatBoxBottom",children:[Object(f.jsx)("textarea",{className:"chatMessageInput",placeholder:"write something...",onChange:function(e){return g(e.target.value)},value:m}),Object(f.jsx)("button",{className:"chatSubmitButton",onClick:M,children:"Send"})]})]}):Object(f.jsx)("span",{className:"noConversationText",children:"Open a conversation to start a chat."})})}),Object(f.jsx)("div",{className:"chatOnline",children:Object(f.jsx)("div",{className:"chatOnlineWrapper",children:Object(f.jsx)(se,{onlineUsers:R,currentId:P._id,setCurrentChat:l})})})]})]})}var oe=function(){var e=Object(n.useContext)(x),t=e.user,c=e.token;return Object(f.jsx)(b.a,{children:Object(f.jsxs)(D.d,{children:[Object(f.jsx)(D.b,{exact:!0,path:"/",children:t?Object(f.jsx)(Q,{}):Object(f.jsx)(te,{})}),Object(f.jsx)(D.b,{path:"/login",children:t?Object(f.jsx)(D.a,{to:"/"}):Object(f.jsx)($,{})}),Object(f.jsx)(D.b,{path:"/register",children:t?Object(f.jsx)(D.a,{to:"/"}):Object(f.jsx)(te,{})}),Object(f.jsx)(D.b,{path:"/messenger",children:t?Object(f.jsx)(re,{}):Object(f.jsx)(D.a,{to:"/"})}),Object(f.jsx)(D.b,{path:"/MyMap",children:t?Object(f.jsx)(R,{}):Object(f.jsx)(D.a,{to:"/"})}),Object(f.jsx)(D.b,{path:"/profile/:username",children:Object(f.jsx)(ee,{token:c})})]})})};r.a.render(Object(f.jsx)(s.a.StrictMode,{children:Object(f.jsx)(g,{children:Object(f.jsx)(oe,{})})}),document.getElementById("root"))},92:function(e,t,c){},96:function(e,t,c){}},[[168,1,2]]]);
//# sourceMappingURL=main.fce75f7d.chunk.js.map